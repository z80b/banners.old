var CountdownTimer,bind=function(t,e){return function(){return t.apply(e,arguments)}};CountdownTimer=function(){function t(t,e,n){this.update=bind(this.update,this),this.getCount=bind(this.getCount,this),this.options=n||{days:"дд",hours:"чч",minutes:"мм",seconds:"сс"},this.$timer=document.querySelector(t),this.$timerContent=document.querySelector(".js-timer-content"),this.$countTpl=this.$timer.querySelector("#timer-count-tpl"),this.endDate=new Date(this.$timer.getAttribute("data-final-date")),this.render()}return t.prototype.render=function(){var t,e,n,r;t="",n=this.options;for(e in n)r=n[e],t+=this.$countTpl.innerText.replace("%name%",e).replace("%title%",r);return this.$timerContent.innerHTML=t},t.prototype.getCount=function(t){var e,n,r;return n=new Date,r=this.endDate.getTime()>n.getTime()?(this.endDate.getTime()-n.getTime())/1e3:0,e=function(){switch(t){case"seconds":return Math.floor(r%60);case"minutes":return Math.floor(r/60)%60;case"hours":return Math.floor(r/60/60)%24;case"days":return Math.floor(r/60/60/24)}}(),e<10?"0"+e:String(e)},t.prototype.update=function(){var t,e,n,r,i,u,a,o,s;u=function(t,e){var n,r,i,u;for(u=[],r=0,i=t.length;r<i;r++)n=t[r],u.push(n.classList.remove(e));return u},n=function(t,e){var n,r,i,u;for(u=[],r=0,i=t.length;r<i;r++)n=t[r],u.push(n.classList.add(e));return u},i=this.options,a=[];for(r in i)o=i[r],t=this.$timer.querySelector(".js-timer-count--"+r),e=t.querySelectorAll(".js-timer-count__part"),u(e,"flip"),s=this.getCount(r),e[0].children[0].setAttribute("data-current",e[0].children[0].getAttribute("data-next")),e[0].children[1].setAttribute("data-current",e[0].children[0].getAttribute("data-next")),e[1].children[0].setAttribute("data-current",e[1].children[0].getAttribute("data-next")),e[1].children[1].setAttribute("data-current",e[1].children[0].getAttribute("data-next")),e[0].children[0].setAttribute("data-next",s[0]),e[0].children[1].setAttribute("data-next",s[0]),e[1].children[0].setAttribute("data-next",s[1]),e[1].children[1].setAttribute("data-next",s[1]),parseInt(e[0].children[0].getAttribute("data-current"))!==parseInt(e[0].children[0].getAttribute("data-next"))&&(e[0].className+=" js-changed"),parseInt(e[1].children[0].getAttribute("data-current"))!==parseInt(e[1].children[0].getAttribute("data-next"))&&(e[1].className+=" js-changed"),a.push(setTimeout(function(t){return function(){var e;return e=t.$timer.querySelectorAll(".js-changed"),u(e,"js-changed"),n(e,"flip")}}(this),50));return a},t.prototype.start=function(){return setTimeout(function(t){return function(){return t.update(),t.start()}}(this),1e3)},t}(),window.onload=function(){return window.countdownTimer=new CountdownTimer(".js-timer","До акции осталось"),window.countdownTimer.start()};